<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•´åˆæ¸¬è©¦ - æ¨™ç±¤é  Power BI ç¶²é æ‡‰ç”¨ç¨‹å¼</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 1000;
            min-width: 300px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .test-panel h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
            color: #4CAF50;
        }
        
        .test-section {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
        }
        
        .test-section:last-child {
            border-bottom: none;
        }
        
        .test-section h4 {
            margin: 0 0 8px 0;
            font-size: 13px;
            color: #FFC107;
        }
        
        .test-button {
            display: inline-block;
            margin: 3px 5px 3px 0;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            background: #007acc;
            color: white;
            cursor: pointer;
            font-size: 11px;
        }
        
        .test-button:hover {
            background: #005a9e;
        }
        
        .test-button.success {
            background: #4CAF50;
        }
        
        .test-button.error {
            background: #f44336;
        }
        
        .test-status {
            margin-top: 10px;
            padding: 8px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .test-status.success {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }
        
        .test-status.error {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }
        
        .test-status.info {
            background: rgba(33, 150, 243, 0.2);
            color: #2196F3;
        }
        
        .test-results {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            font-size: 11px;
        }
        
        .toggle-panel {
            position: fixed;
            top: 10px;
            right: 320px;
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            z-index: 1001;
        }
    </style>
</head>
<body>
    <!-- æ¸¬è©¦é¢æ¿åˆ‡æ›æŒ‰éˆ• -->
    <button class="toggle-panel" onclick="toggleTestPanel()">åˆ‡æ›æ¸¬è©¦é¢æ¿</button>
    
    <!-- æ•´åˆæ¸¬è©¦æ§åˆ¶é¢æ¿ -->
    <div class="test-panel" id="testPanel">
        <h3>ğŸ§ª æ•´åˆæ¸¬è©¦æ§åˆ¶å°</h3>
        
        <div class="test-section">
            <h4>åŸºæœ¬åŠŸèƒ½æ¸¬è©¦</h4>
            <button class="test-button" onclick="testTabSwitching()">æ¨™ç±¤é åˆ‡æ›</button>
            <button class="test-button" onclick="testInitialState()">åˆå§‹ç‹€æ…‹</button>
            <button class="test-button" onclick="testDOMStructure()">DOM çµæ§‹</button>
        </div>
        
        <div class="test-section">
            <h4>Power BI åŠŸèƒ½æ¸¬è©¦</h4>
            <button class="test-button" onclick="testPowerBILoading()">è¼‰å…¥æ¸¬è©¦</button>
            <button class="test-button" onclick="testErrorHandling()">éŒ¯èª¤è™•ç†</button>
            <button class="test-button" onclick="testRetryMechanism()">é‡è©¦æ©Ÿåˆ¶</button>
        </div>
        
        <div class="test-section">
            <h4>éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦</h4>
            <button class="test-button" onclick="testResponsiveBreakpoints()">æ–·é»æª¢æ¸¬</button>
            <button class="test-button" onclick="testDeviceDetection()">è£ç½®æª¢æ¸¬</button>
            <button class="test-button" onclick="testLayoutAdjustment()">ä½ˆå±€èª¿æ•´</button>
        </div>
        
        <div class="test-section">
            <h4>è·¨ç€è¦½å™¨æ¸¬è©¦</h4>
            <button class="test-button" onclick="testBrowserCompatibility()">ç›¸å®¹æ€§æª¢æŸ¥</button>
            <button class="test-button" onclick="testJavaScriptFeatures()">JS åŠŸèƒ½æª¢æŸ¥</button>
            <button class="test-button" onclick="testCSSFeatures()">CSS åŠŸèƒ½æª¢æŸ¥</button>
        </div>
        
        <div class="test-section">
            <h4>å®Œæ•´æµç¨‹æ¸¬è©¦</h4>
            <button class="test-button" onclick="runFullIntegrationTest()">å®Œæ•´æ•´åˆæ¸¬è©¦</button>
            <button class="test-button" onclick="runPerformanceTest()">æ•ˆèƒ½æ¸¬è©¦</button>
            <button class="test-button" onclick="clearTestResults()">æ¸…é™¤çµæœ</button>
        </div>
        
        <div class="test-results" id="testResults">
            <strong>æ¸¬è©¦çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡</strong>
        </div>
    </div>

    <!-- ä¸»è¦æ‡‰ç”¨ç¨‹å¼å…§å®¹ -->
    <div class="container">
        <!-- æ¨™ç±¤é å°èˆªå€åŸŸ -->
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" data-tab="welcome">æ­¡è¿</button>
                <button class="tab-button" data-tab="powerbi">Power BI å ±è¡¨</button>
            </div>
        </div>

        <!-- å…§å®¹é¡¯ç¤ºå€åŸŸ -->
        <div class="content-container">
            <!-- æ­¡è¿é é¢å…§å®¹ -->
            <div class="tab-content active" id="welcome">
                <div class="welcome-content">
                    <h1 class="welcome-title">æ­¡è¿ä½¿ç”¨å ±è¡¨å„€è¡¨æ¿</h1>
                    <div class="welcome-description">
                        <p class="welcome-intro">é€™æ˜¯æ‚¨çš„è³‡æ–™åˆ†æä¸­å¿ƒï¼Œæä¾›å¼·å¤§çš„å•†æ¥­æ™ºæ…§å·¥å…·ä¾†å”åŠ©æ‚¨åšå‡ºæ˜æ™ºçš„æ±ºç­–ã€‚</p>
                        <p class="welcome-instruction">è«‹é»æ“Šä¸Šæ–¹çš„ã€ŒPower BI å ±è¡¨ã€æ¨™ç±¤é ä¾†æŸ¥çœ‹è©³ç´°çš„è³‡æ–™åˆ†æå’Œè¦–è¦ºåŒ–å…§å®¹ã€‚</p>
                    </div>
                    <div class="welcome-features">
                        <h2 class="features-title">åŠŸèƒ½ç‰¹è‰²</h2>
                        <ul class="features-list">
                            <li>äº’å‹•å¼è³‡æ–™è¦–è¦ºåŒ–</li>
                            <li>å³æ™‚è³‡æ–™æ›´æ–°</li>
                            <li>å¤šç¶­åº¦è³‡æ–™åˆ†æ</li>
                            <li>éŸ¿æ‡‰å¼è¨­è¨ˆï¼Œæ”¯æ´å„ç¨®è£ç½®</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Power BI å ±è¡¨å…§å®¹ -->
            <div class="tab-content" id="powerbi">
                <iframe class="powerbi-frame"
                    src="https://app.powerbi.com/reportEmbed?reportId=d79fa9cc-0415-4121-87eb-f3635d9f13c4&autoAuth=true&ctid=305675df-dc39-4b66-8034-b8e7a8cb798c&filterPaneEnabled=false&language=en&formatlocale=en-US"
                    frameborder="0" allowFullScreen="true" allow="fullscreen"
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
                </iframe>
                <div class="error-message" style="display: none;">
                    <!-- éŒ¯èª¤å…§å®¹å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // æ•´åˆæ¸¬è©¦è…³æœ¬
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            tests: []
        };

        function logTest(testName, passed, details = '') {
            testResults.total++;
            if (passed) {
                testResults.passed++;
                console.log(`âœ… ${testName}: é€šé ${details}`);
            } else {
                testResults.failed++;
                console.log(`âŒ ${testName}: å¤±æ•— ${details}`);
            }
            testResults.tests.push({ name: testName, passed, details });
            updateTestDisplay();
        }

        function updateTestDisplay() {
            const resultsDiv = document.getElementById('testResults');
            const successRate = testResults.total > 0 ? ((testResults.passed / testResults.total) * 100).toFixed(1) : 0;
            
            resultsDiv.innerHTML = `
                <strong>æ¸¬è©¦çµ±è¨ˆ</strong><br>
                ç¸½è¨ˆ: ${testResults.total} | é€šé: ${testResults.passed} | å¤±æ•—: ${testResults.failed}<br>
                æˆåŠŸç‡: ${successRate}%<br><br>
                <strong>æœ€è¿‘æ¸¬è©¦:</strong><br>
                ${testResults.tests.slice(-5).map(test => 
                    `${test.passed ? 'âœ…' : 'âŒ'} ${test.name}`
                ).join('<br>')}
            `;
        }

        // åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
        function testTabSwitching() {
            console.log('ğŸ§ª æ¸¬è©¦æ¨™ç±¤é åˆ‡æ›åŠŸèƒ½...');
            
            // æ¸¬è©¦åˆ‡æ›åˆ° Power BI æ¨™ç±¤é 
            switchTab('powerbi');
            const powerbiActive = getCurrentTab() === 'powerbi';
            logTest('åˆ‡æ›åˆ° Power BI æ¨™ç±¤é ', powerbiActive);
            
            // æ¸¬è©¦åˆ‡æ›å›æ­¡è¿æ¨™ç±¤é 
            switchTab('welcome');
            const welcomeActive = getCurrentTab() === 'welcome';
            logTest('åˆ‡æ›å›æ­¡è¿æ¨™ç±¤é ', welcomeActive);
            
            // æ¸¬è©¦ç„¡æ•ˆæ¨™ç±¤é 
            const beforeInvalid = getCurrentTab();
            switchTab('invalid');
            const afterInvalid = getCurrentTab();
            logTest('ç„¡æ•ˆæ¨™ç±¤é è™•ç†', beforeInvalid === afterInvalid);
        }

        function testInitialState() {
            console.log('ğŸ§ª æ¸¬è©¦åˆå§‹ç‹€æ…‹...');
            
            // é‡æ–°åˆå§‹åŒ–
            initializeTabs();
            
            const initialTab = getCurrentTab();
            logTest('åˆå§‹æ¨™ç±¤é ç‚ºæ­¡è¿é ', initialTab === 'welcome');
            
            const welcomeButton = document.querySelector('[data-tab="welcome"]');
            const powerbiButton = document.querySelector('[data-tab="powerbi"]');
            
            logTest('æ­¡è¿æŒ‰éˆ•æœ‰ active é¡åˆ¥', welcomeButton && welcomeButton.classList.contains('active'));
            logTest('Power BI æŒ‰éˆ•æ²’æœ‰ active é¡åˆ¥', powerbiButton && !powerbiButton.classList.contains('active'));
        }

        function testDOMStructure() {
            console.log('ğŸ§ª æ¸¬è©¦ DOM çµæ§‹...');
            
            const requiredElements = [
                '.container',
                '.tab-container',
                '.tab-nav',
                '.tab-button[data-tab="welcome"]',
                '.tab-button[data-tab="powerbi"]',
                '.content-container',
                '#welcome',
                '#powerbi',
                '.powerbi-frame',
                '.error-message'
            ];
            
            requiredElements.forEach(selector => {
                const element = document.querySelector(selector);
                logTest(`DOM å…ƒç´ å­˜åœ¨: ${selector}`, !!element);
            });
        }

        // Power BI åŠŸèƒ½æ¸¬è©¦
        function testPowerBILoading() {
            console.log('ğŸ§ª æ¸¬è©¦ Power BI è¼‰å…¥åŠŸèƒ½...');
            
            // æª¢æŸ¥ Power BI è¨­å®š
            logTest('Power BI è¨­å®šå­˜åœ¨', !!powerBIConfig);
            logTest('Power BI URL æ­£ç¢º', powerBIConfig && powerBIConfig.embedUrl.includes('powerbi.com'));
            
            // æª¢æŸ¥è¼‰å…¥è™•ç†å‡½æ•¸
            logTest('è¼‰å…¥è™•ç†å‡½æ•¸å­˜åœ¨', typeof setupPowerBILoadingHandlers === 'function');
            logTest('è¼‰å…¥æˆåŠŸè™•ç†å‡½æ•¸å­˜åœ¨', typeof handlePowerBILoadSuccess === 'function');
            logTest('å…§å®¹é©—è­‰å‡½æ•¸å­˜åœ¨', typeof validatePowerBIContent === 'function');
        }

        function testErrorHandling() {
            console.log('ğŸ§ª æ¸¬è©¦éŒ¯èª¤è™•ç†åŠŸèƒ½...');
            
            // æª¢æŸ¥éŒ¯èª¤ç‹€æ…‹
            logTest('éŒ¯èª¤ç‹€æ…‹ç‰©ä»¶å­˜åœ¨', !!errorState);
            logTest('éŒ¯èª¤é¡å‹å®šç¾©å®Œæ•´', errorState && Object.keys(errorState.errorTypes).length === 4);
            
            // æª¢æŸ¥éŒ¯èª¤è™•ç†å‡½æ•¸
            logTest('éŒ¯èª¤è™•ç†å‡½æ•¸å­˜åœ¨', typeof handlePowerBIError === 'function');
            logTest('éŒ¯èª¤è¨Šæ¯å»ºç«‹å‡½æ•¸å­˜åœ¨', typeof createErrorMessageContent === 'function');
            logTest('é‡è©¦è™•ç†å‡½æ•¸å­˜åœ¨', typeof handleRetryClick === 'function');
            
            // æ¸¬è©¦éŒ¯èª¤è¨Šæ¯å»ºç«‹
            try {
                const errorContent = createErrorMessageContent('æ¸¬è©¦éŒ¯èª¤', errorState.errorTypes.NETWORK_ERROR);
                logTest('éŒ¯èª¤è¨Šæ¯å»ºç«‹åŠŸèƒ½', errorContent && errorContent.includes('æ¸¬è©¦éŒ¯èª¤'));
            } catch (e) {
                logTest('éŒ¯èª¤è¨Šæ¯å»ºç«‹åŠŸèƒ½', false, e.message);
            }
        }

        function testRetryMechanism() {
            console.log('ğŸ§ª æ¸¬è©¦é‡è©¦æ©Ÿåˆ¶...');
            
            logTest('é‡è©¦è¼‰å…¥å‡½æ•¸å­˜åœ¨', typeof retryPowerBILoad === 'function');
            logTest('è¼‰å…¥è¶…æ™‚è™•ç†å‡½æ•¸å­˜åœ¨', typeof handleLoadTimeout === 'function');
            logTest('é‡è©¦è¨Šæ¯é¡¯ç¤ºå‡½æ•¸å­˜åœ¨', typeof showRetryMessage === 'function');
            
            // æª¢æŸ¥é‡è©¦è¨­å®š
            logTest('é‡è©¦æ¬¡æ•¸è¨­å®šæ­£ç¢º', powerBIConfig && powerBIConfig.retryAttempts === 3);
            logTest('é‡è©¦å»¶é²è¨­å®šæ­£ç¢º', powerBIConfig && powerBIConfig.retryDelay === 2000);
        }

        // éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦
        function testResponsiveBreakpoints() {
            console.log('ğŸ§ª æ¸¬è©¦éŸ¿æ‡‰å¼æ–·é»...');
            
            logTest('æ–·é»æª¢æ¸¬å‡½æ•¸å­˜åœ¨', typeof getCurrentBreakpoint === 'function');
            
            // æ¸¬è©¦ä¸åŒå¯¬åº¦çš„æ–·é»æª¢æ¸¬
            const originalWidth = window.innerWidth;
            
            const testCases = [
                { width: 1400, expected: 'xl' },
                { width: 1000, expected: 'lg' },
                { width: 800, expected: 'md' },
                { width: 600, expected: 'sm' },
                { width: 400, expected: 'xs' },
                { width: 300, expected: 'xxs' }
            ];
            
            testCases.forEach(testCase => {
                // æ¨¡æ“¬è¦–çª—å¯¬åº¦è®ŠåŒ–
                Object.defineProperty(window, 'innerWidth', {
                    writable: true,
                    configurable: true,
                    value: testCase.width
                });
                
                const result = getCurrentBreakpoint();
                logTest(`æ–·é»æª¢æ¸¬ ${testCase.width}px`, result === testCase.expected, `é æœŸ: ${testCase.expected}, å¯¦éš›: ${result}`);
            });
            
            // æ¢å¾©åŸå§‹å¯¬åº¦
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: originalWidth
            });
        }

        function testDeviceDetection() {
            console.log('ğŸ§ª æ¸¬è©¦è£ç½®æª¢æ¸¬...');
            
            logTest('æ‰‹æ©Ÿè£ç½®æª¢æ¸¬å‡½æ•¸å­˜åœ¨', typeof isMobileDevice === 'function');
            logTest('å¹³æ¿è£ç½®æª¢æ¸¬å‡½æ•¸å­˜åœ¨', typeof isTabletDevice === 'function');
            logTest('æ¡Œé¢è£ç½®æª¢æ¸¬å‡½æ•¸å­˜åœ¨', typeof isDesktopDevice === 'function');
            
            // æ¸¬è©¦ç•¶å‰è£ç½®æª¢æ¸¬
            try {
                const isMobile = isMobileDevice();
                const isTablet = isTabletDevice();
                const isDesktop = isDesktopDevice();
                
                // ç¢ºä¿åªæœ‰ä¸€ç¨®è£ç½®é¡å‹ç‚º true
                const deviceCount = [isMobile, isTablet, isDesktop].filter(Boolean).length;
                logTest('è£ç½®é¡å‹å”¯ä¸€æ€§', deviceCount === 1, `æª¢æ¸¬åˆ° ${deviceCount} ç¨®è£ç½®é¡å‹`);
            } catch (e) {
                logTest('è£ç½®æª¢æ¸¬åŠŸèƒ½', false, e.message);
            }
        }

        function testLayoutAdjustment() {
            console.log('ğŸ§ª æ¸¬è©¦ä½ˆå±€èª¿æ•´...');
            
            logTest('ä½ˆå±€èª¿æ•´å‡½æ•¸å­˜åœ¨', typeof adjustLayoutForBreakpoint === 'function');
            logTest('Power BI å°ºå¯¸èª¿æ•´å‡½æ•¸å­˜åœ¨', typeof adjustPowerBIFrameSize === 'function');
            logTest('è¦–çª—å¤§å°è®ŠåŒ–è™•ç†å‡½æ•¸å­˜åœ¨', typeof handleWindowResize === 'function');
            
            // æ¸¬è©¦ä½ˆå±€èª¿æ•´
            try {
                adjustLayoutForBreakpoint('md');
                logTest('ä½ˆå±€èª¿æ•´åŸ·è¡Œ', true);
            } catch (e) {
                logTest('ä½ˆå±€èª¿æ•´åŸ·è¡Œ', false, e.message);
            }
        }

        // è·¨ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦
        function testBrowserCompatibility() {
            console.log('ğŸ§ª æ¸¬è©¦ç€è¦½å™¨ç›¸å®¹æ€§...');
            
            // æª¢æŸ¥åŸºæœ¬ API æ”¯æ´
            logTest('querySelector æ”¯æ´', typeof document.querySelector === 'function');
            logTest('addEventListener æ”¯æ´', typeof document.addEventListener === 'function');
            logTest('classList æ”¯æ´', 'classList' in document.createElement('div'));
            logTest('JSON æ”¯æ´', typeof JSON !== 'undefined');
            logTest('localStorage æ”¯æ´', typeof localStorage !== 'undefined');
            
            // æª¢æŸ¥ ES6 åŠŸèƒ½
            logTest('const/let æ”¯æ´', true); // å¦‚æœèƒ½åŸ·è¡Œåˆ°é€™è£¡å°±è¡¨ç¤ºæ”¯æ´
            logTest('ç®­é ­å‡½æ•¸æ”¯æ´', typeof (() => {}) === 'function');
            logTest('Promise æ”¯æ´', typeof Promise !== 'undefined');
        }

        function testJavaScriptFeatures() {
            console.log('ğŸ§ª æ¸¬è©¦ JavaScript åŠŸèƒ½...');
            
            // æª¢æŸ¥æ ¸å¿ƒå‡½æ•¸
            const coreFunctions = [
                'initializeTabs',
                'switchTab',
                'getCurrentTab',
                'isActiveTab',
                'handlePowerBITabSwitch',
                'setupPowerBILoadingHandlers',
                'handlePowerBIError',
                'initializeResponsiveHandlers'
            ];
            
            coreFunctions.forEach(funcName => {
                logTest(`å‡½æ•¸å­˜åœ¨: ${funcName}`, typeof window[funcName] === 'function');
            });
            
            // æª¢æŸ¥å…¨åŸŸç‰©ä»¶
            logTest('tabState ç‰©ä»¶å­˜åœ¨', typeof tabState !== 'undefined');
            logTest('powerBIConfig ç‰©ä»¶å­˜åœ¨', typeof powerBIConfig !== 'undefined');
            logTest('errorState ç‰©ä»¶å­˜åœ¨', typeof errorState !== 'undefined');
        }

        function testCSSFeatures() {
            console.log('ğŸ§ª æ¸¬è©¦ CSS åŠŸèƒ½...');
            
            // æª¢æŸ¥ CSS åŠŸèƒ½æ”¯æ´
            const testDiv = document.createElement('div');
            document.body.appendChild(testDiv);
            
            // æª¢æŸ¥ Flexbox æ”¯æ´
            testDiv.style.display = 'flex';
            logTest('Flexbox æ”¯æ´', testDiv.style.display === 'flex');
            
            // æª¢æŸ¥ Grid æ”¯æ´
            testDiv.style.display = 'grid';
            logTest('CSS Grid æ”¯æ´', testDiv.style.display === 'grid');
            
            // æª¢æŸ¥ Transform æ”¯æ´
            testDiv.style.transform = 'translateX(10px)';
            logTest('CSS Transform æ”¯æ´', testDiv.style.transform.includes('translateX'));
            
            // æª¢æŸ¥ Transition æ”¯æ´
            testDiv.style.transition = 'all 0.3s ease';
            logTest('CSS Transition æ”¯æ´', testDiv.style.transition.includes('0.3s'));
            
            document.body.removeChild(testDiv);
        }

        // å®Œæ•´æ•´åˆæ¸¬è©¦
        function runFullIntegrationTest() {
            console.log('ğŸš€ é–‹å§‹å®Œæ•´æ•´åˆæ¸¬è©¦...');
            
            // æ¸…é™¤ä¹‹å‰çš„çµæœ
            testResults = { total: 0, passed: 0, failed: 0, tests: [] };
            
            // åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
            testInitialState();
            testDOMStructure();
            testTabSwitching();
            testPowerBILoading();
            testErrorHandling();
            testRetryMechanism();
            testResponsiveBreakpoints();
            testDeviceDetection();
            testLayoutAdjustment();
            testBrowserCompatibility();
            testJavaScriptFeatures();
            testCSSFeatures();
            
            // é¡¯ç¤ºæœ€çµ‚çµæœ
            const successRate = ((testResults.passed / testResults.total) * 100).toFixed(1);
            console.log(`\nğŸ“Š æ•´åˆæ¸¬è©¦å®Œæˆï¼`);
            console.log(`ç¸½è¨ˆ: ${testResults.total} é …æ¸¬è©¦`);
            console.log(`é€šé: ${testResults.passed} é …`);
            console.log(`å¤±æ•—: ${testResults.failed} é …`);
            console.log(`æˆåŠŸç‡: ${successRate}%`);
            
            if (testResults.failed > 0) {
                console.log('\nâŒ å¤±æ•—çš„æ¸¬è©¦:');
                testResults.tests.filter(test => !test.passed).forEach(test => {
                    console.log(`  - ${test.name}: ${test.details}`);
                });
            }
        }

        function runPerformanceTest() {
            console.log('ğŸ§ª åŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦...');
            
            const startTime = performance.now();
            
            // æ¸¬è©¦æ¨™ç±¤é åˆ‡æ›æ•ˆèƒ½
            const switchStart = performance.now();
            for (let i = 0; i < 100; i++) {
                switchTab(i % 2 === 0 ? 'welcome' : 'powerbi');
            }
            const switchEnd = performance.now();
            const switchTime = switchEnd - switchStart;
            
            logTest('æ¨™ç±¤é åˆ‡æ›æ•ˆèƒ½', switchTime < 1000, `100æ¬¡åˆ‡æ›è€—æ™‚: ${switchTime.toFixed(2)}ms`);
            
            // æ¸¬è©¦éŸ¿æ‡‰å¼èª¿æ•´æ•ˆèƒ½
            const resizeStart = performance.now();
            for (let i = 0; i < 50; i++) {
                handleWindowResize();
            }
            const resizeEnd = performance.now();
            const resizeTime = resizeEnd - resizeStart;
            
            logTest('éŸ¿æ‡‰å¼èª¿æ•´æ•ˆèƒ½', resizeTime < 500, `50æ¬¡èª¿æ•´è€—æ™‚: ${resizeTime.toFixed(2)}ms`);
            
            const totalTime = performance.now() - startTime;
            logTest('ç¸½é«”æ•ˆèƒ½', totalTime < 2000, `ç¸½è€—æ™‚: ${totalTime.toFixed(2)}ms`);
        }

        function clearTestResults() {
            testResults = { total: 0, passed: 0, failed: 0, tests: [] };
            updateTestDisplay();
            console.clear();
            console.log('ğŸ§¹ æ¸¬è©¦çµæœå·²æ¸…é™¤');
        }

        function toggleTestPanel() {
            const panel = document.getElementById('testPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¯ æ•´åˆæ¸¬è©¦é é¢å·²è¼‰å…¥');
            console.log('ä½¿ç”¨å³ä¸Šè§’çš„æ¸¬è©¦é¢æ¿ä¾†åŸ·è¡Œå„ç¨®æ¸¬è©¦');
            updateTestDisplay();
        });
    </script>
</body>
</html>